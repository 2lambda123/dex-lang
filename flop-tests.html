<!DOCTYPE HTML>
<html><head><link rel="stylesheet" href="style.css" type="text/css"><meta charset="UTF-8"></head><body><div id="main-output"><div class="cell"><div class="code-block">matmul <span class="symbol">::</span> i<span class="symbol">=</span><span class="symbol">&gt;</span>j<span class="symbol">=</span><span class="symbol">&gt;</span><span class="type-name">Real</span> <span class="symbol">-</span><span class="symbol">&gt;</span> j<span class="symbol">=</span><span class="symbol">&gt;</span>k<span class="symbol">=</span><span class="symbol">&gt;</span><span class="type-name">Real</span> <span class="symbol">-</span><span class="symbol">&gt;</span> i<span class="symbol">=</span><span class="symbol">&gt;</span>k<span class="symbol">=</span><span class="symbol">&gt;</span><span class="type-name">Real</span>
matmul x y <span class="symbol">=</span> <span class="keyword">for</span> i k<span class="symbol">.</span> sum (<span class="keyword">for</span> j<span class="symbol">.</span> x<span class="symbol">.</span>i<span class="symbol">.</span>j <span class="symbol">*</span> y<span class="symbol">.</span>j<span class="symbol">.</span>k)
</div></div><div class="cell"><div class="code-block">
</div></div><div class="cell"><div class="code-block">_, <span class="type-name">N</span> <span class="symbol">=</span> <span class="keyword">unpack</span> range 10
</div></div><div class="cell"><div class="code-block">_, <span class="type-name">M</span> <span class="symbol">=</span> <span class="keyword">unpack</span> range 10
</div></div><div class="cell"><div class="code-block">
</div></div><div class="cell"><div class="code-block">k <span class="symbol">=</span> newKey 0
</div></div><div class="cell"><div class="code-block">
</div></div><div class="cell"><div class="code-block">mat <span class="symbol">::</span> <span class="type-name">N</span><span class="symbol">=</span><span class="symbol">&gt;</span><span class="type-name">N</span><span class="symbol">=</span><span class="symbol">&gt;</span><span class="type-name">Real</span>
mat <span class="symbol">=</span> <span class="keyword">for</span> i j<span class="symbol">.</span> rand (ixkey (ixkey k i) j)
</div></div><div class="cell"><div class="code-block">
</div></div><div class="cell"><div class="code-block"><span class="command">:flops</span> matmul mat mat
</div><div class="result-block">%fadd 1 N^3
%fmul 1 N^3
copy 1 N^3</div></div><div class="cell"><div class="code-block">
</div></div><div class="cell"><div class="code-block"><span class="comment">-- This should be O(N) but we&#39;re instantiating and adding zeros
</span></div></div><div class="cell"><div class="code-block"><span class="command">:flops</span> transposeLinear (<span class="keyword">llam</span> xs<span class="symbol">.</span> <span class="keyword">for</span> i<span class="symbol">.</span> xs<span class="symbol">.</span>i) (<span class="keyword">for</span> i<span class="symbol">::</span><span class="type-name">N</span><span class="symbol">.</span> 0<span class="symbol">.</span>0)
</div><div class="result-block">%%int_to_index_set 1 N^1
%eq 1 N^2
%fadd 1 N^2
%isub 2 N^1
%select 1 N^2
copy 1  + 1 N^1</div></div><div class="cell"><div class="code-block">
</div></div><div class="cell"><div class="code-block"><span class="comment">-- This should be O(NM) but we&#39;re instantiating and adding zeros
</span></div></div><div class="cell"><div class="code-block"><span class="command">:flops</span> transposeLinear (<span class="keyword">llam</span> m<span class="symbol">.</span> <span class="keyword">for</span> i j<span class="symbol">.</span> m<span class="symbol">.</span>j<span class="symbol">.</span>i) (<span class="keyword">for</span> i<span class="symbol">::</span><span class="type-name">N</span> j<span class="symbol">::</span><span class="type-name">M</span><span class="symbol">.</span> 0<span class="symbol">.</span>0)
</div><div class="result-block">%%int_to_index_set 1 M^1 N^1 + 1 N^1
%eq 1 M^1 N^2 + 1 M^2 N^1
%fadd 1 M^1 N^2 + 1 M^2 N^2
%isub 2 M^1 N^1 + 2 N^1
%select 1 M^1 N^2 + 1 M^2 N^2
copy 1  + 1 M^1 N^1 + 2 N^1</div></div></div></body></html>